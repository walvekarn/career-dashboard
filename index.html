        function renderSkillsChart() {
            const ctx = document.getElementById('skillsChart');
            const proficiencyMap = { 'beginner': 1, 'intermediate': 2, 'advanced': 3, 'expert': 4 };
            
            // Group skills by inferred category
            filteredData.skills.forEach(skill => {
                if (['Python', 'SQL'].includes(skill.name)) {
                    skill.categoryGroup = 'Languages';
                } else if (['React', 'Scikit-learn', 'XGBoost', 'Pandas'].includes(skill.name)) {
                    skill.categoryGroup = 'Frameworks';
                } else if (['Power BI', 'Excel/VBA', 'Make.com'].includes(skill.name)) {
                    skill.categoryGroup = 'Tools';
                } else {
                    skill.categoryGroup = 'Platforms';
                }
            });
            
            if (charts.skills) charts.skills.destroy();
            charts.skills = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: filteredData.skills.slice(0, 10).map(s => s.name),
                    datasets: [{
                        label: 'Proficiency Level',
                        data: filteredData.skills.slice(0, 10).map(s => proficiencyMap[s.proficiencyLevel]),
                        backgroundColor: filteredData.skills.slice(0, 10).map(s => {
                            const level = proficiencyMap[s.proficiencyLevel];
                            return level === 4 ? '#00d4ff' : 
                                   level === 3 ? '#c77dff' : 
                                   level === 2 ? '#7b2cbf' : '#5a1a8f';
                        }),
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#f5f5f5' } },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const skill = filteredData.skills[context.dataIndex];
                                    const projectCount = skill.projectsUsedIn ? skill.projectsUsedIn.length : 0;
                                    const lastUsed = skill.lastPracticed || 'Unknown';
                                    return `Used in ${projectCount} projects\nLast used: ${lastUsed}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: { 
                            min: 0,
                            max: 4,
                            ticks: { 
                                color: '#e8e8e8',
                                callback: function(value) {
                                    const labels = ['', 'Beginner', 'Intermediate', 'Advanced', 'Expert'];
                                    return labels[value];
                                }
                            },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        },
                        x: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function renderVelocityChart() {
            const ctx = document.getElementById('velocityChart');
            
            // Calculate monthly velocity
            const monthlyVelocity = {};
            careerData.projects.filter(p => p.completionDate).forEach(proj => {
                const month = proj.completionDate.substring(0, 7);
                monthlyVelocity[month] = (monthlyVelocity[month] || 0) + 1;
            });

            const sortedMonths = Object.keys(monthlyVelocity).sort();
            const velocityValues = sortedMonths.map(m => monthlyVelocity[m]);
            
            // Calculate trend line
            const trend = velocityValues.map((v, i) => {
                const recent = velocityValues.slice(Math.max(0, i - 2), i + 1);
                return recent.reduce((a, b) => a + b, 0) / recent.length;
            });

            if (charts.velocity) charts.velocity.destroy();
            charts.velocity = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedMonths,
                    datasets: [
                        {
                            label: 'Projects Completed',
                            data: velocityValues,
                            borderColor: '#c77dff',
                            backgroundColor: 'rgba(199, 125, 255, 0.2)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Velocity Trend',
                            data: trend,
                            borderColor: '#00d4ff',
                            borderDash: [5, 5],
                            tension: 0.4,
                            fill: false,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#f5f5f5' } }
                    },
                    scales: {
                        y: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        },
                        x: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        }
                    }
                }
            });
        }

        function renderMomentumChart() {
            const ctx = document.getElementById('momentumChart');
            const momentum = calculateMomentumScore();
            
            if (charts.momentum) charts.momentum.destroy();
            charts.momentum = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Project Velocity (40%)', 'Networking (20%)', 'Mental Health (20%)', 'Skills Growth (20%)'],
                    datasets: [{
                        data: [
                            momentum.breakdown.projects,
                            momentum.breakdown.networking,
                            momentum.breakdown.mentalHealth,
                            momentum.breakdown.skills
                        ],
                        backgroundColor: ['#c77dff', '#00d4ff', '#7b2cbf', '#48cae4'],
                        borderWidth: 2,
                        borderColor: '#1a0a2e'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom',
                            labels: { color: '#f5f5f5', font: { size: 11 } }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    return `${label}: ${value}/100`;
                                }
                            }
                        }
                    }
                }
            });
        }<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Analytics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a0a2e 0%, #0f051d 100%);
            color: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: rgba(123, 44, 191, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(199, 125, 255, 0.2);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #c77dff 0%, #00d4ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #e8e8e8;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(123, 44, 191, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(199, 125, 255, 0.1);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-size: 0.9em;
            color: #c77dff;
            font-weight: 500;
        }

        .control-group input,
        .control-group select {
            padding: 10px 15px;
            background: rgba(26, 10, 46, 0.6);
            border: 1px solid rgba(199, 125, 255, 0.3);
            border-radius: 8px;
            color: #f5f5f5;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }

        .control-group input:focus,
        .control-group select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .kpi-card {
            background: rgba(123, 44, 191, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(199, 125, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #7b2cbf, #c77dff, #00d4ff);
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(199, 125, 255, 0.3);
            border-color: #00d4ff;
        }

        .kpi-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
            background: linear-gradient(135deg, #c77dff 0%, #00d4ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .kpi-label {
            color: #e8e8e8;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        .kpi-trend {
            font-size: 0.9em;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 5px;
            background: rgba(0, 212, 255, 0.1);
            display: inline-block;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: rgba(123, 44, 191, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(199, 125, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            min-height: 400px;
        }

        .chart-container h3 {
            color: #c77dff;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .chart-wrapper {
            position: relative;
            height: 350px;
        }

        .data-table {
            background: rgba(123, 44, 191, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(199, 125, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            overflow-x: auto;
        }

        .data-table h3 {
            color: #c77dff;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        th {
            background: rgba(123, 44, 191, 0.3);
            padding: 12px;
            text-align: left;
            color: #00d4ff;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
            transition: background 0.3s ease;
        }

        th:hover {
            background: rgba(123, 44, 191, 0.5);
        }

        td {
            padding: 12px;
            border-bottom: 1px solid rgba(199, 125, 255, 0.1);
        }

        tr:hover {
            background: rgba(199, 125, 255, 0.05);
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 500;
            display: inline-block;
        }

        .status-completed {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
        }

        .status-in-progress {
            background: rgba(199, 125, 255, 0.2);
            color: #c77dff;
        }

        .status-planned {
            background: rgba(123, 44, 191, 0.2);
            color: #7b2cbf;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #7b2cbf 0%, #c77dff 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(199, 125, 255, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
        }

        .update-panel {
            background: rgba(123, 44, 191, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(199, 125, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .update-panel h3 {
            color: #c77dff;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .update-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .update-btn {
            padding: 15px;
            background: rgba(26, 10, 46, 0.6);
            border: 1px solid rgba(199, 125, 255, 0.3);
            border-radius: 8px;
            color: #f5f5f5;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .update-btn:hover {
            background: rgba(123, 44, 191, 0.3);
            border-color: #00d4ff;
            transform: translateY(-2px);
        }

        .update-btn-title {
            color: #00d4ff;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .update-btn-desc {
            font-size: 0.85em;
            opacity: 0.8;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1a0a2e 0%, #0f051d 100%);
            margin: 5% auto;
            padding: 30px;
            border: 1px solid rgba(199, 125, 255, 0.3);
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            color: #c77dff;
            font-size: 1.5em;
            font-weight: 600;
        }

        .close-modal {
            background: transparent;
            border: none;
            color: #f5f5f5;
            font-size: 2em;
            cursor: pointer;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #00d4ff;
        }

        .prompt-box {
            background: rgba(26, 10, 46, 0.6);
            border: 1px solid rgba(199, 125, 255, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .copy-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .velocity-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }

        .velocity-green {
            background: rgba(0, 255, 127, 0.2);
            color: #00ff7f;
        }

        .velocity-yellow {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
        }

        .velocity-red {
            background: rgba(255, 69, 0, 0.2);
            color: #ff4500;
        }

        .data-completeness {
            background: rgba(123, 44, 191, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(199, 125, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .data-completeness h3 {
            color: #c77dff;
            margin-bottom: 15px;
        }

        .completeness-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .completeness-item {
            background: rgba(26, 10, 46, 0.6);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(199, 125, 255, 0.2);
        }

        .completeness-label {
            color: #e8e8e8;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .completeness-value {
            color: #00d4ff;
            font-size: 1.3em;
            font-weight: 600;
        }

        .suggestions {
            margin-top: 20px;
            padding: 15px;
            background: rgba(199, 125, 255, 0.1);
            border-radius: 8px;
            border-left: 3px solid #c77dff;
        }

        .suggestions h4 {
            color: #c77dff;
            margin-bottom: 10px;
        }

        .suggestions ul {
            list-style: none;
            padding-left: 0;
        }

        .suggestions li {
            padding: 5px 0;
            color: #e8e8e8;
        }

        .suggestions li:before {
            content: "▸ ";
            color: #00d4ff;
            font-weight: bold;
            margin-right: 5px;
        }

        .highlight-row {
            background: rgba(0, 212, 255, 0.2) !important;
            transition: background 0.3s ease;
        }

        .export-dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: rgba(26, 10, 46, 0.95);
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(199, 125, 255, 0.3);
            z-index: 1;
            margin-top: 5px;
        }

        .dropdown-content button {
            width: 100%;
            padding: 12px 16px;
            text-align: left;
            background: transparent;
            border: none;
            color: #f5f5f5;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .dropdown-content button:hover {
            background: rgba(199, 125, 255, 0.2);
        }

        .export-dropdown:hover .dropdown-content {
            display: block;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .chart-grid {
                grid-template-columns: 1fr;
            }

            .kpi-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        @media print {
            body {
                background: white;
                color: black;
            }

            .controls,
            .action-buttons,
            .update-panel {
                display: none;
            }

            .kpi-card,
            .chart-container,
            .data-table {
                break-inside: avoid;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Career Analytics Dashboard</h1>
            <p class="subtitle">Comprehensive insights from consolidated career data | Last Updated: October 25, 2025</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="startDate">Start Date</label>
                <input type="date" id="startDate" value="2023-01-01">
            </div>
            <div class="control-group">
                <label for="endDate">End Date</label>
                <input type="date" id="endDate" value="2025-10-25">
            </div>
            <div class="control-group">
                <label for="statusFilter">Status</label>
                <select id="statusFilter">
                    <option value="all">All Statuses</option>
                    <option value="completed">Completed</option>
                    <option value="in-progress">In Progress</option>
                    <option value="planned">Planned</option>
                </select>
            </div>
            <div class="control-group">
                <label for="categoryFilter">Category</label>
                <select id="categoryFilter">
                    <option value="all">All Categories</option>
                    <option value="AI">AI</option>
                    <option value="data-analysis">Data Analysis</option>
                    <option value="automation">Automation</option>
                    <option value="web-dev">Web Development</option>
                </select>
            </div>
            <div class="control-group">
                <label for="searchInput">Search</label>
                <input type="text" id="searchInput" placeholder="Search projects...">
            </div>
        </div>

        <div class="action-buttons">
            <div class="export-dropdown">
                <button class="btn btn-secondary">Export Data ▼</button>
                <div class="dropdown-content">
                    <button onclick="exportData('json')">Export as JSON</button>
                    <button onclick="exportData('csv')">Export as CSV</button>
                    <button onclick="exportData('charts')">Export Chart Images</button>
                    <button onclick="exportData('filtered')">Export Filtered Data</button>
                    <button onclick="exportData('png')">Export Dashboard (Print)</button>
                </div>
            </div>
            <button class="btn" onclick="applyFilters()">Apply Filters</button>
            <button class="btn btn-secondary" onclick="resetFilters()">Reset Filters</button>
        </div>

        <div class="data-completeness">
            <h3>📊 Data Coverage & Completeness</h3>
            <div class="completeness-grid" id="completenessGrid"></div>
            <div class="suggestions">
                <h4>💡 Suggestions to Improve Data Quality</h4>
                <ul id="suggestionsList"></ul>
            </div>
        </div>

        <div class="kpi-grid" id="kpiGrid"></div>

        <div class="chart-grid">
            <div class="chart-container">
                <h3>Activity Timeline</h3>
                <div class="chart-wrapper">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Goals Progress</h3>
                <div class="chart-wrapper">
                    <canvas id="goalsChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Mental Health Trends</h3>
                <div class="chart-wrapper">
                    <canvas id="mentalHealthChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Skills Proficiency Heatmap</h3>
                <div class="chart-wrapper">
                    <canvas id="skillsChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Project Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="projectDistChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Project Status Overview</h3>
                <div class="chart-wrapper">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Velocity Forecast & Trends</h3>
                <div class="chart-wrapper">
                    <canvas id="velocityChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>Career Momentum Score</h3>
                <div class="chart-wrapper">
                    <canvas id="momentumChart"></canvas>
                </div>
            </div>
        </div>

        <div class="data-table">
            <h3>Projects Overview</h3>
            <table id="projectsTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">Name</th>
                        <th onclick="sortTable(1)">Category</th>
                        <th onclick="sortTable(2)">Status</th>
                        <th onclick="sortTable(3)">Complexity</th>
                        <th onclick="sortTable(4)">Start Date</th>
                        <th onclick="sortTable(5)">Business Impact</th>
                    </tr>
                </thead>
                <tbody id="projectsTableBody"></tbody>
            </table>
        </div>

        <div class="update-panel">
            <h3>Quick Update Panel</h3>
            <div class="update-buttons">
                <div class="update-btn" onclick="showUpdateModal('project')">
                    <div class="update-btn-title">Add New Project</div>
                    <div class="update-btn-desc">Log a new project with tech stack and impact</div>
                </div>
                <div class="update-btn" onclick="showUpdateModal('skill')">
                    <div class="update-btn-title">Update Skills</div>
                    <div class="update-btn-desc">Add or update your skill proficiency</div>
                </div>
                <div class="update-btn" onclick="showUpdateModal('goal')">
                    <div class="update-btn-title">Track Goal Progress</div>
                    <div class="update-btn-desc">Update progress on career goals</div>
                </div>
                <div class="update-btn" onclick="showUpdateModal('networking')">
                    <div class="update-btn-title">Log Networking</div>
                    <div class="update-btn-desc">Record new professional connections</div>
                </div>
                <div class="update-btn" onclick="showUpdateModal('mental')">
                    <div class="update-btn-title">Mental Health Check</div>
                    <div class="update-btn-desc">Log mood and energy levels</div>
                </div>
                <div class="update-btn" onclick="showUpdateModal('challenge')">
                    <div class="update-btn-title">Document Challenge</div>
                    <div class="update-btn-desc">Record obstacles and solutions</div>
                </div>
            </div>
        </div>

        <div id="updateModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">Update Data</h2>
                    <button class="close-modal" onclick="closeModal()">&times;</button>
                </div>
                <div id="modalBody">
                    <div class="prompt-box" id="promptText"></div>
                    <button class="copy-btn" onclick="copyPrompt()">📋 Copy Prompt to Clipboard</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const careerData = {
  "exportDate": "2025-10-25",
  "dataCompleteness": "85%",
  "dataSources": ["ChatGPT", "Cursor", "Perplexity", "Manual Records"],
  
  "projects": [
    {
      "id": "proj_001",
      "name": "Lean Six Sigma Project on Pricing Life Cycle",
      "category": "data-analysis",
      "startDate": "2025-09-20",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Power BI", "Excel", "SAP", "Anaplan", "DMAIC", "Lean Six Sigma"],
      "description": "Reconcile pricing database and SAP to ensure pricing accuracy; build reconciliation process and monitoring dashboards.",
      "outcome": "Targeted 2-3 FTE reduction; projected $180K-240K annual savings; Power BI dashboards planned/partially implemented.",
      "complexity": 4,
      "hoursSpent": null,
      "businessImpact": "Cost savings $180K-240K annually"
    },
    {
      "id": "proj_002",
      "name": "Australia Indies Pricing Process Improvement",
      "category": "data-analysis",
      "startDate": "2025-09-20",
      "completionDate": "2025-12-01",
      "status": "completed",
      "techStack": ["Excel", "Power BI", "SAP"],
      "description": "Process-driven approach for Indies discounts (85k+ line items) to stabilize CPI events and reduce individual dependency.",
      "outcome": "Stabilized CPI process; reduced manual workload during CPI cycles.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Process stabilization, reduced manual workload"
    },
    {
      "id": "proj_003",
      "name": "Call Transcript Analysis & Labeling (Wells Fargo)",
      "category": "data-analysis",
      "startDate": "2025-06-02",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Python", "Pandas", "Scikit-learn", "XGBoost", "Power BI"],
      "description": "Label calls into 12 buckets, make key notes, generate charts; build ML models for classification and insights.",
      "outcome": "Enabled intent categorization and insight generation for NPS improvements.",
      "complexity": 4,
      "hoursSpent": null,
      "businessImpact": "NPS improvement insights"
    },
    {
      "id": "proj_004",
      "name": "AI Video Generation Automation (LHAI - Lazzy Hustler AI Studio)",
      "category": "AI",
      "startDate": "2025-03-27",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Python", "Make.com", "OpenAI API", "ElevenLabs", "D-ID", "Pexels", "Google Sheets", "Google Drive"],
      "description": "End-to-end pipeline selecting content, generating scripts, voiceovers, scenes, thumbnails, and uploads with foldered outputs.",
      "outcome": "Up to ~70% editing effort reduction; reusable pipeline for multi-client use.",
      "complexity": 5,
      "hoursSpent": null,
      "businessImpact": "70% reduction in manual video production, 150+ videos/month capacity"
    },
    {
      "id": "proj_005",
      "name": "Vidvatta AI Reels Studio System",
      "category": "AI",
      "startDate": "2025-10-20",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Make.com", "OpenAI", "Notion", "ElevenLabs"],
      "description": "API-ready Notion database + Make.com webhooks to generate and package AI Reels with sample data and PDFs/CSVs.",
      "outcome": "Portfolio-grade automation package; stakeholder-ready documentation.",
      "complexity": 4,
      "hoursSpent": null,
      "businessImpact": "Portfolio showcase, client-ready automation"
    },
    {
      "id": "proj_006",
      "name": "Motivation is a Scam – 180-Scene Video System",
      "category": "AI",
      "startDate": "2025-10-18",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["OpenAI", "OpenArt", "MiniMax Hailuo 02", "Make.com", "Google Sheets"],
      "description": "4-act structure (24/72/60/24) with batch prompts, scene router, AI agents; image-to-video workflow and voiceover generation.",
      "outcome": "Working scene generation, prompts, and pipeline iterations; troubleshooting JSON and Iterator modules.",
      "complexity": 5,
      "hoursSpent": null,
      "businessImpact": "Complex narrative automation system"
    },
    {
      "id": "proj_007",
      "name": "GenAI Video & Media Automation Platform (Portfolio Visual)",
      "category": "AI",
      "startDate": "2025-10-24",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Make.com", "OpenAI", "ElevenLabs"],
      "description": "Visual workflow and business metric articulation for portfolio: input → output flow, 70% edit reduction, multi-client adoption.",
      "outcome": "Portfolio visual and documentation artifact for client pitches.",
      "complexity": 2,
      "hoursSpent": null,
      "businessImpact": "Client pitch materials"
    },
    {
      "id": "proj_008",
      "name": "The Nikita Project (AI journal/planner/health tracker app)",
      "category": "AI",
      "startDate": "2025-01-28",
      "completionDate": null,
      "status": "planned",
      "techStack": ["React", "Python", "OpenAI"],
      "description": "AI-powered app for journaling, tasks, menstrual cycle, health, habits, and growth analytics with charts/forecasts.",
      "outcome": "Detailed vision and roadmap requested; execution pending.",
      "complexity": 5,
      "hoursSpent": null,
      "businessImpact": "Personal wellness app development"
    },
    {
      "id": "proj_009",
      "name": "AI Agent Business ($10k/month in 3 months)",
      "category": "AI",
      "startDate": "2025-02-11",
      "completionDate": null,
      "status": "planned",
      "techStack": ["OpenAI", "Automation", "Web stack"],
      "description": "Build lean AI agent business to $10k MRR with milestones, weekly tasks, and monetization strategies.",
      "outcome": "Execution plan requested; not yet started.",
      "complexity": 4,
      "hoursSpent": null,
      "businessImpact": "Target $10K/month MRR"
    },
    {
      "id": "proj_010",
      "name": "Data Scientist Job Readiness & Portfolio Sprint",
      "category": "career-development",
      "startDate": "2025-03-02",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Python", "Power BI", "ClickUp", "CodeChef"],
      "description": "Structured roadmap, projects, and daily plan to secure 45 LPA+ role; building portfolio and practicing DS/ML.",
      "outcome": "Roadmap and tasks outlined; execution ongoing.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Career advancement targeting ₹45 LPA+"
    },
    {
      "id": "proj_011",
      "name": "Automated Book-to-Video Pipeline (Talking Avatars)",
      "category": "AI",
      "startDate": "2025-03-27",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Project Gutenberg", "OpenAI", "ElevenLabs", "D-ID", "Pexels"],
      "description": "Summarize books, generate 15-20 min videos with avatar intros/outros, genre-specific music, chapters, and metadata.",
      "outcome": "Pipeline design with folder structure; implementation partially complete.",
      "complexity": 5,
      "hoursSpent": null,
      "businessImpact": "Educational content automation"
    },
    {
      "id": "proj_012",
      "name": "AI Video Generator Website (UI + Domain)",
      "category": "web-dev",
      "startDate": "2025-03-31",
      "completionDate": null,
      "status": "planned",
      "techStack": ["Web stack", "Tailwind CSS"],
      "description": "Public-facing site for AI video generator with playful branding; login/home/account/settings pages.",
      "outcome": "Design concepts and domain ideation pending build.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Public product interface"
    },
    {
      "id": "proj_013",
      "name": "Legal Operations Process Chart (Wells Fargo)",
      "category": "data-analysis",
      "startDate": "2025-05-26",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Process Mapping", "Excel", "Visio"],
      "description": "Pre-legal and post-judgment processes; law firm engagement and selection by account buckets; consumer channel ops.",
      "outcome": "Process visualization and decision flows under development.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Process documentation and optimization"
    },
    {
      "id": "proj_014",
      "name": "NPS Analysis, Payment Assistance Plans, Fabric Onboarding",
      "category": "data-analysis",
      "startDate": "2025-08-05",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Analytics", "Fabric", "NPS"],
      "description": "Ongoing analytics work: NPS analysis, assistance plan evaluation, and Fabric platform onboarding.",
      "outcome": "Operational analytics improvements; onboarding progress.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Customer satisfaction insights"
    },
    {
      "id": "proj_015",
      "name": "Vistra Digital Twin FY25-FY26 Roadmap Review",
      "category": "strategic-analysis",
      "startDate": "2025-07-30",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Roadmap analysis"],
      "description": "Assess roles and opportunities aligned to roadmap; target ≥₹45 LPA roles.",
      "outcome": "Identified role alignment opportunities; next steps TBD.",
      "complexity": 2,
      "hoursSpent": null,
      "businessImpact": "Career alignment opportunities identified"
    },
    {
      "id": "proj_016",
      "name": ".xlsm Filter & Transfer Automation",
      "category": "automation",
      "startDate": "2025-11-13",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["Excel VBA", ".xlsm"],
      "description": "Filter specific customer names ('KA New', 'On Premise') and transfer to another worksheet.",
      "outcome": "Automation approach defined; implementation details not captured.",
      "complexity": 2,
      "hoursSpent": null,
      "businessImpact": "Data processing automation"
    },
    {
      "id": "proj_017",
      "name": "Apple Stock Performance Analysis",
      "category": "data-analysis",
      "startDate": "2023-01-01",
      "completionDate": "2023-12-31",
      "status": "completed",
      "techStack": ["Python", "Pandas", "Matplotlib"],
      "description": "Analyze Apple stock performance and visualize results.",
      "outcome": "Demonstrated analysis & visualization; hosted on GitHub.",
      "complexity": 2,
      "hoursSpent": null,
      "businessImpact": "Portfolio demonstration piece"
    },
    {
      "id": "proj_018",
      "name": "AI Mastermind Knowledge Base",
      "category": "documentation",
      "startDate": "2025-12-01",
      "completionDate": "2025-12-15",
      "status": "completed",
      "techStack": ["Markdown", "Mermaid diagrams", "Documentation"],
      "description": "Comprehensive career advancement toolkit with 50+ prompts, automation workflows, and implementation roadmaps.",
      "outcome": "924 lines of structured documentation with 11 specialized sections.",
      "complexity": 4,
      "hoursSpent": null,
      "businessImpact": "Career toolkit with 50+ reusable prompts"
    },
    {
      "id": "proj_019",
      "name": "Portfolio Website Framework",
      "category": "web-dev",
      "startDate": "2025-10-20",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["HTML", "CSS", "Rocket AI", "Tailwind CSS"],
      "description": "Professional portfolio website with mobile-responsive design and ATS optimization.",
      "outcome": "Recruiter-optimized layout with project showcase and business impact metrics.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Professional online presence"
    },
    {
      "id": "proj_020",
      "name": "LinkedIn Automation System",
      "category": "automation",
      "startDate": "2025-10-15",
      "completionDate": null,
      "status": "in-progress",
      "techStack": ["LinkedIn API", "Buffer", "Phantombuster", "Hootsuite"],
      "description": "Automated content scheduling, engagement tasks, and connection management for LinkedIn presence.",
      "outcome": "Daily engagement automation (10-15 likes, 3-5 comments) and weekly content strategy.",
      "complexity": 3,
      "hoursSpent": null,
      "businessImpact": "Enhanced professional networking and visibility"
    },
    {
      "id": "proj_021",
      "name": "Job Search Automation Pipeline",
      "category": "automation",
      "startDate": "2025-11-01",
      "completionDate": "2025-11-15",
      "status": "completed",
      "techStack": ["Google Sheets", "Make.com", "LinkedIn Sales Navigator", "Calendly"],
      "description": "Automated job discovery, application tracking, resume customization, and follow-up scheduling.",
      "outcome": "Complete application tracking system with automated follow-ups and interview preparation.",
      "complexity": 4,
      "hoursSpent": null,
      "businessImpact": "Streamlined job search process"
    },
    {
      "id": "proj_022",
      "name": "Career Advancement Data Export System",
      "category": "data-engineering",
      "startDate": "2025-10-25",
      "completionDate": "2025-10-25",
      "status": "completed",
      "techStack": ["JSON", "Markdown", "Data extraction algorithms"],
      "description": "Comprehensive data extraction from multiple sources to create unified career tracking system.",
      "outcome": "400+ lines JSON + 129 lines Markdown with structured export templates.",
      "complexity": 3,
      "hoursSpent": 2,
      "businessImpact": "Dashboard-ready career analytics"
    }
  ],
  
  "skills": [
    {"name": "Python", "category": "technical", "proficiencyLevel": "advanced"},
    {"name": "Pandas", "category": "technical", "proficiencyLevel": "advanced"},
    {"name": "Scikit-learn", "category": "technical", "proficiencyLevel": "intermediate"},
    {"name": "XGBoost", "category": "technical", "proficiencyLevel": "intermediate"},
    {"name": "Power BI", "category": "technical", "proficiencyLevel": "advanced"},
    {"name": "Excel/VBA", "category": "technical", "proficiencyLevel": "intermediate"},
    {"name": "Make.com", "category": "technical", "proficiencyLevel": "advanced"},
    {"name": "OpenAI API", "category": "technical", "proficiencyLevel": "expert"},
    {"name": "ElevenLabs", "category": "technical", "proficiencyLevel": "advanced"},
    {"name": "SQL", "category": "technical", "proficiencyLevel": "intermediate"},
    {"name": "Prompt Engineering", "category": "technical", "proficiencyLevel": "advanced"},
    {"name": "API Integration", "category": "technical", "proficiencyLevel": "expert"}
  ],
  
  "goals": [
    {
      "id": "goal_001",
      "category": "career",
      "goal": "Secure Data Scientist or Senior Analytics role at ≥₹45 LPA",
      "progress": 60,
      "status": "in-progress"
    },
    {
      "id": "goal_002",
      "category": "career",
      "goal": "Reach ₹70+ LPA long-term compensation",
      "progress": 30,
      "status": "in-progress"
    },
    {
      "id": "goal_003",
      "category": "entrepreneurship",
      "goal": "Build AI agent business to $10K/month",
      "progress": 20,
      "status": "delayed"
    },
    {
      "id": "goal_004",
      "category": "entrepreneurship",
      "goal": "Automate YouTube content pipeline",
      "progress": 75,
      "status": "in-progress"
    },
    {
      "id": "goal_005",
      "category": "portfolio",
      "goal": "Portfolio: 3-5 AI/Analytics projects",
      "progress": 100,
      "status": "achieved"
    }
  ],
  
  "mentalHealth": [
    {"date": "2025-10-17", "mood": 2, "energy": 2},
    {"date": "2025-11-15", "mood": 3, "energy": 3},
    {"date": "2025-12-01", "mood": 3, "energy": 3},
    {"date": "2025-02-28", "mood": 4, "energy": 4},
    {"date": "2025-03-15", "mood": 3, "energy": 3},
    {"date": "2025-10-25", "mood": 4, "energy": 4}
  ],
  
  "kpiSummary": {
    "totalProjects": 22,
    "projectsByStatus": {
      "completed": 5,
      "in-progress": 14,
      "planned": 3
    },
    "avgProjectComplexity": 3.5,
    "totalSkillsTracked": 25,
    "moodTrend": "improving",
    "avgMood": 3.3,
    "projectVelocity": 1.5,
    "goalsAchieved": 1,
    "goalsInProgress": 6
  }
};

        let filteredData = careerData;
        let charts = {};
        let currentPromptText = '';

        function initDashboard() {
            renderDataCompleteness();
            renderKPIs();
            renderCharts();
            renderProjectsTable();
            setupSearchHighlight();
        }

        function renderDataCompleteness() {
            const grid = document.getElementById('completenessGrid');
            const projectCount = careerData.projects.length;
            const dateRange = calculateDateRange();
            const dataGaps = careerData.dataGaps || [];
            
            const completenessData = [
                { label: 'Projects Tracked', value: projectCount },
                { label: 'Date Range', value: dateRange },
                { label: 'Data Completeness', value: careerData.dataCompleteness },
                { label: 'Skills Tracked', value: careerData.skills.length }
            ];

            grid.innerHTML = completenessData.map(item => `
                <div class="completeness-item">
                    <div class="completeness-label">${item.label}</div>
                    <div class="completeness-value">${item.value}</div>
                </div>
            `).join('');

            const suggestions = document.getElementById('suggestionsList');
            const missingSuggestions = [
                dataGaps.includes('Exact hours spent per project not tracked') ? 
                    'Add hours spent tracking for better velocity calculations' : null,
                projectCount < 10 ? 'Document more projects to improve trend analysis' : null,
                careerData.mentalHealth.length < 12 ? 
                    'Log mental health check-ins more frequently for better insights' : null,
                'Add GitHub/demo links to showcase completed projects',
                'Track networking outcomes and follow-ups consistently'
            ].filter(Boolean);

            suggestions.innerHTML = missingSuggestions.map(s => `<li>${s}</li>`).join('');
        }

        function calculateDateRange() {
            const dates = careerData.projects
                .map(p => new Date(p.startDate))
                .filter(d => !isNaN(d));
            
            if (dates.length === 0) return 'N/A';
            
            const minDate = new Date(Math.min(...dates));
            const maxDate = new Date(Math.max(...dates));
            const days = Math.ceil((maxDate - minDate) / (1000 * 60 * 60 * 24));
            
            return `${days} days`;
        }

        function calculateVelocity() {
            const completed = careerData.projects.filter(p => p.status === 'completed');
            if (completed.length === 0) return { velocity: 0, trend: 'stable' };

            const dates = completed.map(p => ({
                start: new Date(p.startDate),
                end: p.completionDate ? new Date(p.completionDate) : new Date()
            }));

            const totalDays = dates.reduce((sum, d) => {
                return sum + Math.ceil((d.end - d.start) / (1000 * 60 * 60 * 24));
            }, 0);

            const velocity = completed.length / (totalDays || 1);
            
            const recentVelocity = calculateRecentVelocity(6);
            const trend = recentVelocity > velocity ? 'accelerating' : 
                         recentVelocity < velocity ? 'slowing' : 'stable';

            return { velocity: velocity * 30, trend };
        }

        function calculateRecentVelocity(months) {
            const cutoffDate = new Date();
            cutoffDate.setMonth(cutoffDate.getMonth() - months);
            
            const recent = careerData.projects.filter(p => 
                p.status === 'completed' && 
                new Date(p.startDate) >= cutoffDate
            );

            if (recent.length === 0) return 0;
            
            const days = Math.ceil((new Date() - cutoffDate) / (1000 * 60 * 60 * 24));
            return (recent.length / days) * 30;
        }

        function calculateMomentumScore() {
            const projectVelocity = calculateVelocity().velocity;
            const projectScore = Math.min(projectVelocity * 10, 40);

            const networkingGrowth = 15;

            const moodData = careerData.mentalHealth;
            const avgMood = moodData.reduce((sum, m) => sum + m.mood, 0) / moodData.length;
            const mentalScore = (avgMood / 5) * 20;

            const recentSkills = careerData.skills.filter(s => 
                s.lastPracticed && new Date(s.lastPracticed) > new Date('2025-01-01')
            ).length;
            const skillScore = Math.min(recentSkills * 2, 20);

            const totalScore = projectScore + networkingGrowth + mentalScore + skillScore;

            return {
                total: Math.round(totalScore),
                breakdown: {
                    projects: Math.round(projectScore),
                    networking: networkingGrowth,
                    mentalHealth: Math.round(mentalScore),
                    skills: Math.round(skillScore)
                }
            };
        }

        function getVelocityIndicator(goal) {
            const velocity = calculateVelocity().velocity;
            const remainingProgress = 100 - goal.progress;
            const daysNeeded = remainingProgress / velocity;
            
            const targetDate = goal.targetDate ? new Date(goal.targetDate) : null;
            if (!targetDate) return { class: 'velocity-yellow', text: 'No target' };
            
            const today = new Date();
            const daysUntilTarget = Math.ceil((targetDate - today) / (1000 * 60 * 60 * 24));
            
            if (daysNeeded < daysUntilTarget * 0.8) {
                return { class: 'velocity-green', text: 'Ahead' };
            } else if (daysNeeded <= daysUntilTarget) {
                return { class: 'velocity-yellow', text: 'On track' };
            } else {
                return { class: 'velocity-red', text: 'Behind' };
            }
        }

        function renderKPIs() {
            const velocityData = calculateVelocity();
            const momentumScore = calculateMomentumScore();
            
            const kpis = [
                {
                    label: 'Total Projects',
                    value: filteredData.kpiSummary.totalProjects,
                    trend: `${filteredData.kpiSummary.projectsByStatus['in-progress']} active`
                },
                {
                    label: 'Active Goals',
                    value: filteredData.kpiSummary.goalsInProgress,
                    trend: `${filteredData.kpiSummary.goalsAchieved} achieved`
                },
                {
                    label: 'Avg Mood',
                    value: filteredData.kpiSummary.avgMood.toFixed(1),
                    trend: filteredData.kpiSummary.moodTrend
                },
                {
                    label: 'Skills Tracked',
                    value: filteredData.kpiSummary.totalSkillsTracked,
                    trend: '12 advanced+'
                },
                {
                    label: 'Project Velocity',
                    value: velocityData.velocity.toFixed(1),
                    trend: `${velocityData.trend} trend`
                },
                {
                    label: 'Complexity Avg',
                    value: filteredData.kpiSummary.avgProjectComplexity.toFixed(1),
                    trend: 'out of 5'
                },
                {
                    label: 'Completed',
                    value: filteredData.kpiSummary.projectsByStatus.completed,
                    trend: '23% completion rate'
                },
                {
                    label: 'Momentum Score',
                    value: momentumScore.total,
                    trend: 'out of 100'
                }
            ];

            const grid = document.getElementById('kpiGrid');
            grid.innerHTML = kpis.map(kpi => `
                <div class="kpi-card">
                    <div class="kpi-label">${kpi.label}</div>
                    <div class="kpi-value">${kpi.value}</div>
                    <div class="kpi-trend">${kpi.trend}</div>
                </div>
            `).join('');
        }

        function renderCharts() {
            renderTimelineChart();
            renderGoalsChart();
            renderMentalHealthChart();
            renderSkillsChart();
            renderProjectDistChart();
            renderStatusChart();
            renderVelocityChart();
            renderMomentumChart();
        }

        function renderTimelineChart() {
            const ctx = document.getElementById('timelineChart');
            const monthCounts = {};
            
            filteredData.projects.forEach(proj => {
                const month = proj.startDate.substring(0, 7);
                monthCounts[month] = (monthCounts[month] || 0) + 1;
            });

            const sortedMonths = Object.keys(monthCounts).sort();
            
            if (charts.timeline) charts.timeline.destroy();
            charts.timeline = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedMonths,
                    datasets: [{
                        label: 'Projects Started',
                        data: sortedMonths.map(m => monthCounts[m]),
                        borderColor: '#c77dff',
                        backgroundColor: 'rgba(199, 125, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#f5f5f5' } }
                    },
                    scales: {
                        y: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        },
                        x: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        }
                    }
                }
            });
        }

        function renderGoalsChart() {
            const ctx = document.getElementById('goalsChart');
            
            const goalsWithIndicators = filteredData.goals.map(g => {
                const indicator = getVelocityIndicator(g);
                return {
                    ...g,
                    indicator: indicator.text
                };
            });
            
            if (charts.goals) charts.goals.destroy();
            charts.goals = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: goalsWithIndicators.map(g => g.goal.substring(0, 30) + '...'),
                    datasets: [{
                        label: 'Progress %',
                        data: goalsWithIndicators.map(g => g.progress),
                        backgroundColor: goalsWithIndicators.map(g => {
                            const ind = getVelocityIndicator(g);
                            return ind.class === 'velocity-green' ? '#00ff7f' :
                                   ind.class === 'velocity-yellow' ? '#ffd700' : '#ff4500';
                        }),
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { labels: { color: '#f5f5f5' } },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const goal = goalsWithIndicators[context.dataIndex];
                                    return `Status: ${goal.indicator}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: { 
                            max: 100,
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        },
                        y: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function renderMentalHealthChart() {
            const ctx = document.getElementById('mentalHealthChart');
            
            if (charts.mentalHealth) charts.mentalHealth.destroy();
            charts.mentalHealth = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: filteredData.mentalHealth.map(m => m.date),
                    datasets: [
                        {
                            label: 'Mood',
                            data: filteredData.mentalHealth.map(m => m.mood),
                            borderColor: '#c77dff',
                            backgroundColor: 'rgba(199, 125, 255, 0.2)',
                            tension: 0.4
                        },
                        {
                            label: 'Energy',
                            data: filteredData.mentalHealth.map(m => m.energy),
                            borderColor: '#00d4ff',
                            backgroundColor: 'rgba(0, 212, 255, 0.2)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#f5f5f5' } }
                    },
                    scales: {
                        y: { 
                            min: 0,
                            max: 5,
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        },
                        x: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        }
                    }
                }
            });
        }

        function renderSkillsChart() {
            const ctx = document.getElementById('skillsChart');
            const proficiencyMap = { 'beginner': 1, 'intermediate': 2, 'advanced': 3, 'expert': 4 };
            
            if (charts.skills) charts.skills.destroy();
            charts.skills = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: filteredData.skills.slice(0, 10).map(s => s.name),
                    datasets: [{
                        label: 'Proficiency Level',
                        data: filteredData.skills.slice(0, 10).map(s => proficiencyMap[s.proficiencyLevel]),
                        backgroundColor: filteredData.skills.slice(0, 10).map(s => {
                            const level = proficiencyMap[s.proficiencyLevel];
                            return level === 4 ? '#00d4ff' : 
                                   level === 3 ? '#c77dff' : 
                                   level === 2 ? '#7b2cbf' : '#5a1a8f';
                        }),
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#f5f5f5' } }
                    },
                    scales: {
                        y: { 
                            min: 0,
                            max: 4,
                            ticks: { 
                                color: '#e8e8e8',
                                callback: function(value) {
                                    const labels = ['', 'Beginner', 'Intermediate', 'Advanced', 'Expert'];
                                    return labels[value];
                                }
                            },
                            grid: { color: 'rgba(199, 125, 255, 0.1)' }
                        },
                        x: { 
                            ticks: { color: '#e8e8e8' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function renderProjectDistChart() {
            const ctx = document.getElementById('projectDistChart');
            const categories = {};
            
            filteredData.projects.forEach(proj => {
                categories[proj.category] = (categories[proj.category] || 0) + 1;
            });
            
            if (charts.projectDist) charts.projectDist.destroy();
            charts.projectDist = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categories),
                    datasets: [{
                        data: Object.values(categories),
                        backgroundColor: [
                            '#7b2cbf',
                            '#c77dff',
                            '#00d4ff',
                            '#5a1a8f',
                            '#9d4edd',
                            '#48cae4'
                        ],
                        borderWidth: 2,
                        borderColor: '#1a0a2e'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom',
                            labels: { color: '#f5f5f5' }
                        }
                    }
                }
            });
        }

        function renderStatusChart() {
            const ctx = document.getElementById('statusChart');
            
            if (charts.status) charts.status.destroy();
            charts.status = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Completed', 'In Progress', 'Planned'],
                    datasets: [{
                        data: [
                            filteredData.kpiSummary.projectsByStatus.completed,
                            filteredData.kpiSummary.projectsByStatus['in-progress'],
                            filteredData.kpiSummary.projectsByStatus.planned
                        ],
                        backgroundColor: ['#00d4ff', '#c77dff', '#7b2cbf'],
                        borderWidth: 2,
                        borderColor: '#1a0a2e'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom',
                            labels: { color: '#f5f5f5' }
                        }
                    }
                }
            });
        }

        function renderProjectsTable() {
            const tbody = document.getElementById('projectsTableBody');
            tbody.innerHTML = filteredData.projects.map(proj => `
                <tr>
                    <td>${proj.name}</td>
                    <td>${proj.category}</td>
                    <td><span class="status-badge status-${proj.status}">${proj.status}</span></td>
                    <td>${proj.complexity}/5</td>
                    <td>${proj.startDate}</td>
                    <td>${proj.businessImpact}</td>
                </tr>
            `).join('');
        }

        function applyFilters() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const status = document.getElementById('statusFilter').value;
            const category = document.getElementById('categoryFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();

            filteredData = { ...careerData };
            filteredData.projects = careerData.projects.filter(proj => {
                const dateMatch = proj.startDate >= startDate && proj.startDate <= endDate;
                const statusMatch = status === 'all' || proj.status === status;
                const categoryMatch = category === 'all' || proj.category === category;
                const searchMatch = search === '' || 
                    proj.name.toLowerCase().includes(search) ||
                    proj.description.toLowerCase().includes(search);
                return dateMatch && statusMatch && categoryMatch && searchMatch;
            });

            updateKPIsFromFiltered();
            renderKPIs();
            renderCharts();
            renderProjectsTable();
        }

        function resetFilters() {
            document.getElementById('startDate').value = '2023-01-01';
            document.getElementById('endDate').value = '2025-10-25';
            document.getElementById('statusFilter').value = 'all';
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('searchInput').value = '';
            filteredData = careerData;
            renderKPIs();
            renderCharts();
            renderProjectsTable();
        }

        function updateKPIsFromFiltered() {
            const statusCounts = { completed: 0, 'in-progress': 0, planned: 0 };
            filteredData.projects.forEach(p => statusCounts[p.status]++);
            
            filteredData.kpiSummary = {
                ...careerData.kpiSummary,
                totalProjects: filteredData.projects.length,
                projectsByStatus: statusCounts
            };
        }

        function sortTable(columnIndex) {
            const table = document.getElementById('projectsTable');
            const rows = Array.from(table.querySelectorAll('tbody tr'));
            const isAscending = table.dataset.sortOrder !== 'asc';
            
            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].textContent;
                const bValue = b.cells[columnIndex].textContent;
                return isAscending ? 
                    aValue.localeCompare(bValue, undefined, { numeric: true }) :
                    bValue.localeCompare(aValue, undefined, { numeric: true });
            });
            
            table.dataset.sortOrder = isAscending ? 'asc' : 'desc';
            const tbody = table.querySelector('tbody');
            rows.forEach(row => tbody.appendChild(row));
        }

        function exportData(format) {
            if (format === 'json') {
                const dataStr = JSON.stringify(filteredData, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                downloadFile(blob, 'career_data.json');
            } else if (format === 'csv') {
                const csv = convertToCSV(filteredData.projects);
                const blob = new Blob([csv], { type: 'text/csv' });
                downloadFile(blob, 'career_projects.csv');
            } else if (format === 'png') {
                alert('PNG export: Use browser print > Save as PDF, then convert to PNG');
                window.print();
            }
        }

        function convertToCSV(projects) {
            const headers = ['Name', 'Category', 'Status', 'Complexity', 'Start Date', 'Business Impact'];
            const rows = projects.map(p => [
                p.name,
                p.category,
                p.status,
                p.complexity,
                p.startDate,
                p.businessImpact
            ]);
            
            return [headers, ...rows].map(row => row.join(',')).join('\n');
        }

        function downloadFile(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        function showPrompt(type) {
            const prompts = {
                project: 'Add new project:\n- Name\n- Category\n- Tech Stack\n- Business Impact\n- Status',
                skill: 'Update skill:\n- Skill name\n- Proficiency level (beginner/intermediate/advanced/expert)\n- Projects used in',
                goal: 'Track goal progress:\n- Goal description\n- Current progress %\n- Milestones achieved\n- Target date',
                networking: 'Log networking activity:\n- Contact name\n- Platform (LinkedIn/Email/Event)\n- Action taken\n- Outcome',
                mental: 'Mental health check-in:\n- Mood (1-5)\n- Energy (1-5)\n- Notes\n- Coping strategies',
                challenge: 'Document challenge:\n- Challenge description\n- Solution applied\n- Lessons learned\n- Status'
            };
            
            alert(prompts[type] || 'Update prompt');
        }

        window.addEventListener('load', initDashboard);
    </script>
</body>
</html>